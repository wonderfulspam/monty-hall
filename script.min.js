var results=JSON.parse(localStorage.getItem("results"))||{changed:{wins:0,losses:0},stayed:{wins:0,losses:0}};localStorage.setItem("results",JSON.stringify(results)),updateTable(results);var timeout1=3e3,timeout2=5e3;isRobot()&&(timeout1=0,timeout2=0);var initialDom=$("#monty-canvas").html();function prepareGame(){var e=[1,2,3],t=Math.floor(3*Math.random())+1,s=e.indexOf(t);e.splice(s,1);var a=!0;$("body").on("click",".card-initial",function(){if(a){a=!1;var s=$(this).data("number");$(".card").removeClass("card-initial"),$(".card").addClass("card-final"),$(this).addClass("clicked");var n=e.indexOf(s);-1!=n&&e.splice(n,1);var i=Math.floor(Math.random()*e.length),l=e[i];$("#help-text").text("Du har valgt dør nr. "+s+". Hvad nu, hvis jeg fortæller at dør nr. "+l+" ikke er den rigtige dør?"),setTimeout(function(){$(".card[data-number='"+l+"'").remove(),$("#help-text").text("Nu spørger jeg dig: Har du lyst til at skifte dør, eller stoler du på din første indskydelse?"),$(".card-final").click(function(){$(".card").removeClass("clicked"),$(this).addClass("clicked");var e=$(this).data("number"),a=!1,n=!1;e===s?$("#help-text").text("Du har valgt at blive på dør nr. "+s+". Interessant ..."):(a=!0,$("#help-text").text("Du har valgt at skifte til dør nr. "+e+". Lad os se om det giver pote ...")),setTimeout(function(){e===t?($("#help-text").text("Tillykke! Du er et sandt geni."),n=!0):$("#help-text").text("Det var du satme ringe til."),$("#help-text").append("<button onclick='resetGame()'>Spil igen</button>"),n&&a?results.changed.wins++:n&&!a?results.stayed.wins++:!n&&a?results.changed.losses++:results.stayed.losses++,localStorage.setItem("results",JSON.stringify(results)),updateTable(results)},timeout1)})},timeout2)}})}async function simulate(){var e=Math.floor(3*Math.random());$("#monty-canvas").children().eq(e).trigger("click"),await new Promise(e=>setTimeout(e,50));var t=Math.floor(2*Math.random());$("#monty-canvas").children().eq(t).trigger("click"),await new Promise(e=>setTimeout(e,25)),$("button").trigger("click")}function resetGame(){$("#monty-canvas").html(initialDom),prepareGame(),isRobot()&&simulate()}function updateTable(e){$("#total-changed").text(e.changed.wins+e.changed.losses),$("#changed-won").text(e.changed.wins),$("#changed-lost").text(e.changed.losses),$("#changed-percentage").text((e.changed.wins/(e.changed.wins+e.changed.losses)*100).toFixed(2)+"%"),$("#total-stayed").text(e.stayed.wins+e.stayed.losses),$("#stayed-won").text(e.stayed.wins),$("#stayed-lost").text(e.stayed.losses),$("#stayed-percentage").text((e.stayed.wins/(e.stayed.wins+e.stayed.losses)*100).toFixed(2)+"%"),$("#total-total").text(e.stayed.wins+e.stayed.losses+e.changed.losses+e.changed.wins),$("#total-won").text(e.stayed.wins+e.changed.wins),$("#total-lost").text(e.stayed.losses+e.changed.losses),$("#total-percentage").text(((e.stayed.wins+e.changed.wins)/(e.stayed.wins+e.stayed.losses+e.changed.wins+e.changed.losses)*100).toFixed(2)+"%")}function isRobot(){return url=new URL(window.location.href),!!url.searchParams.get("robot")}prepareGame(),isRobot()&&simulate();
